function SeatSelector(t,e){this.$el=$(t),this.settings=e,this.seats=null,this.takenSeats=this.settings.takenSeats,this.qty=parseInt(this.settings.qty),this.qtySelected=0,this.selectedSeats=[],this.main()}SeatSelector.prototype.call=function(t,e){return this[t](e)},SeatSelector.prototype.clearSeats=function(){this.qtySelected=0,this.selectedSeats=[],jQuery(".selected").toggleClass("selected")},SeatSelector.prototype.confirmSeats=function(e){var s=this;this.selectedSeats.length===this.qty?this.$el.api({on:"now",url:this.settings.uri,data:{seats:this.selectedSeats.toString()},method:"POST",onComplete:function(t){t.error?s.seatError([t.seats,t.message]):null!==e&&e()}}):this.$el.atkNotify({color:"red",content:this.settings.confirmErrorMsg,position:"topCenter",openTransition:"slide down"})},SeatSelector.prototype.seatError=function(t){var s=this;t[0].forEach(function(t){jQuery("[data-"+s.settings.dataAttr+'="'+t+'"]').removeClass("selected").addClass("reserved");var e=s.selectedSeats.indexOf(t);-1<e&&(s.selectedSeats.splice(e,1),s.qtySelected--)}),this.seats.off("click"),this.setSeatHandler(),this.$el.atkNotify({color:"red",content:t[1],position:"topCenter",openTransition:"slide down"})},SeatSelector.prototype.setSeatHandler=function(){var e=this;this.seats=this.getAvailableSeats(),this.seats.on("click",function(){if(e.qtySelected<e.qty&&!jQuery(this).hasClass("selected"))jQuery(this).toggleClass("selected"),e.selectedSeats.push(jQuery(this).data(e.settings.dataAttr)),e.qtySelected++;else if($(this).hasClass("selected")){jQuery(this).toggleClass("selected"),e.qtySelected--;var t=e.selectedSeats.indexOf(jQuery(this).data(e.settings.dataAttr));-1<t&&e.selectedSeats.splice(t,1)}else e.$el.atkNotify({color:"red",content:e.settings.maxQtyErrorMsg,position:"topCenter",openTransition:"slide down"})})},SeatSelector.prototype.getAvailableSeats=function(){return this.$el.find(".seat").filter(":not(.reserved)")},SeatSelector.prototype.main=function(){var e=this;this.takenSeats.forEach(function(t){jQuery("[data-"+e.settings.dataAttr+'="'+t+'"]').toggleClass("reserved")}),this.setSeatHandler(),this.settings.zoomable&&svgPanZoom(this.settings.zoomable,this.settings.zoomableOptions)},SeatSelector.DEFAULTS={uri:null,uri_options:null,takenSeats:[],dataAttr:"place",qty:0,confirmErrorMsg:"Please select all your tickets prior to confirm your seat.",maxQtyErrorMsg:"All of your seats are already select.",zoomable:null,zoomableOptions:{zoomEnabled:!0,controlIconsEnabled:!0,fit:!0,center:!0,minZoom:1,maxZoom:10}},atk.registerPlugin("SeatSelector",SeatSelector);